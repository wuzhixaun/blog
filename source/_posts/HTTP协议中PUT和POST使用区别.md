---
title: HTTP协议中PUT和POST使用区别
date: 2020-04-18 20:33:09
tags:
    - HTTP

categories: 
    - JAVA
---

### HTTP 幂等方法
 + HTTP/1.1 定义：一次或者多次请求某一个资源的本身应该具有同样的结果（网络超时问题除外），也就是说，**其任意多次执行对资源本身所产生的影响均与一次执行的影响相同**。
 + 这里需要关注几个重点：

<!--more-->
    + 幂等不仅仅只是一次（或多次）请求对资源没有副作用（比如查询数据库操作，没有增删改，因此没有对数据库有任何影响）。
    + 幂等还包括第一次请求的时候对资源产生了副作用，但是以后的多次请求都不会再对资源产生副作用。
    + 幂等关注的是以后的多次请求是否对资源产生的副作用，而不关注结果。
    +网络超时等问题，不是幂等的讨论范围。

方法 | GET|POST|PUT|DELETE|PATCH|
---|:---:|:---:|:---:|:---:|:---:|
是否幂等性 | √| ×| √| √|×|

#### 1. `GET`
用于获取资源，不管调用多少次接口，结果都不会改变，所以是幂等的。
```
    只是查询数据，不会影响到资源的变化，因此我们认为它幂等
```
#### 2. `POST`
```
 方法是一个非幂等方法，因为调用多次，都将产生新的资源。因为它会对资源本身产生影响，每次调用都会有新的资源产生，因此不满足幂等性。
```
#### 3. `PUT`
```
因为它直接把实体部分的数据替换到服务器的资源，我们多次调用它，只会产生一次影响，但是有相同结果的 HTTP 方法，所以满足幂等性。
```
#### 4. `DELETE`
```
调用一次和多次对资源产生影响是相同的，所以也满足幂等性。
```

### 什么情况下需要幂等
业务开发中，经常会遇到重复提交的情况，无论是由于网络问题无法收到请求结果而重新发起请求，或是前端的操作抖动而造成重复提交情况。 在交易系统，支付系统这种重复提交造成的问题有尤其明显，比如：
 + 用户在APP上连续点击了多次提交订单，后台应该只产生一个订单；
 + 向支付宝发起支付请求，由于网络问题或系统BUG重发，支付宝应该只扣一次钱。 很显然，声明幂等的服务认为，外部调用者会存在多次调用的情况，为了防止外部多次调用对系统数据状态的发生多次改变，将服务设计成幂等。

### HTTP POST vs HTTP PUT





